<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Pizzaria Minutu‚Äôs ‚Ä¢ Delivery</title>
  <style>
    :root{--bg:#fff;--fg:#0f172a;--muted:#64748b;--brand:#ff7a00;--brand-2:#ffb703;--card:#f8fafc;--line:#e2e8f0;--ok:#16a34a;--warn:#f59e0b;--shadow:0 8px 24px rgba(2,6,23,.12)}
    *{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--fg);font:400 16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    img{display:block;max-width:100%}button{font:inherit;cursor:pointer}
    .app{max-width:420px;margin:0 auto;min-height:100dvh;display:flex;flex-direction:column;background:var(--bg)}
    header{position:sticky;top:0;z-index:10;background:var(--bg);padding:12px 14px 8px;border-bottom:1px solid var(--line)}
    .topbar{display:flex;align-items:center;gap:10px}.icon{width:28px;height:28px;border-radius:10px;background:var(--card);display:grid;place-items:center}
    .logo{display:flex;align-items:center;gap:8px;font-weight:800}.logo .mark{width:28px;height:28px;border-radius:50%;background:conic-gradient(from 120deg,var(--brand),var(--brand-2));display:grid;place-items:center;color:#fff;font-weight:900}
    .address{margin-top:8px;display:flex;align-items:center;gap:8px;background:var(--card);padding:10px 12px;border-radius:12px}
    .address input{border:0;background:transparent;outline:0;width:100%;font-size:14px}
    .tabs{display:flex;gap:10px;overflow:auto;padding:10px 14px;border-bottom:1px solid var(--line);scroll-snap-type:x mandatory}
    .tab{flex:0 0 auto;scroll-snap-align:start;display:grid;place-items:center;gap:6px;padding:8px;border-radius:14px;border:1px solid var(--line);min-width:72px;background:#fff}
    .tab.active{border-color:transparent;box-shadow:var(--shadow)}.tab img{width:44px;height:44px;border-radius:50%}.tab span{font-size:12px}
    .search{padding:10px 14px}.search input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:#fff}
    .list{display:grid;gap:12px;padding:4px 14px 96px}
    .card{display:flex;gap:12px;background:#fff;border:1px solid var(--line);border-radius:16px;padding:10px;align-items:center}
    .thumb{width:84px;height:84px;border-radius:14px;overflow:hidden;flex:0 0 auto;background:var(--card)}
    .meta{flex:1 1 auto;min-width:0}.title{font-weight:700;font-size:16px}.desc{color:var(--muted);font-size:12px;margin-top:2px}
    .priceRow{display:flex;align-items:center;gap:10px;margin-top:8px}.price{font-weight:800}
    .add{margin-left:auto;background:var(--brand);color:#fff;border:0;border-radius:12px;padding:8px 12px;box-shadow:var(--shadow)}
    .fab{position:fixed;inset:auto 16px 16px;z-index:15;max-width:420px;margin:0 auto;left:0;right:0}
    .cartBtn{width:100%;display:flex;align-items:center;gap:8px;justify-content:center;background:#111827;color:#fff;border:0;padding:14px 16px;border-radius:16px;box-shadow:var(--shadow)}
    .cartBtn small{opacity:.8}
    .sheet{position:fixed;left:50%;transform:translateX(-50%);bottom:-100%;width:100%;max-width:420px;background:#fff;border-radius:20px 20px 0 0;box-shadow:0 -10px 40px rgba(2,6,23,.18);transition:bottom .25s ease;z-index:20}
    .sheet.show{bottom:0}.sheet header{border-bottom:1px solid var(--line)}.sheet h3{margin:0;font-size:16px}
    .sheet .body{max-height:50dvh;overflow:auto;padding:10px 14px}.line{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px dashed var(--line)}.line:last-child{border-bottom:0}
    .qty{display:flex;align-items:center;gap:8px}.qty button{width:28px;height:28px;border-radius:10px;border:1px solid var(--line);background:#fff}
    .footer{padding:12px 14px;border-top:1px solid var(--line);display:flex;gap:10px}.checkout{background:var(--ok);color:#fff;border:0;border-radius:14px;padding:12px 16px;flex:1}.close{border:1px solid var(--line);background:#fff;border-radius:14px;padding:12px 16px}
    .hidden{display:none}.pill{font-size:11px;background:#eef2ff;color:#3730a3;border-radius:999px;padding:2px 8px}
    .overlay{position:fixed;inset:0;background:rgba(2,6,23,.4);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:25}
    .overlay.show{opacity:1;pointer-events:auto}
    .modal{position:fixed;left:50%;bottom:-100%;transform:translateX(-50%);width:100%;max-width:420px;background:#fff;border-radius:20px 20px 0 0;box-shadow:0 -10px 40px rgba(2,6,23,.25);transition:bottom .25s ease;z-index:30}
    .modal.show{bottom:0}
    .modal header{display:flex;gap:10px;align-items:center;padding:14px;border-bottom:1px solid var(--line)}
    .modal .mbody{max-height:60dvh;overflow:auto;padding:12px 14px}
    .optgrp{margin:10px 0;border-bottom:1px solid var(--line)}
    .optgrp:last-child{border-bottom:0}
    .optgrp h4{margin:4px 0 8px;font-size:14px;display:flex;align-items:center;gap:8px}
    .opt{display:flex;align-items:center;gap:10px;padding:10px 0}
    .opt label{flex:1}
    .opt small{color:var(--muted)}
    .modal .mfooter{display:flex;gap:10px;padding:12px 14px;border-top:1px solid var(--line)}
    .cta{background:var(--brand);color:#fff;border:0;border-radius:14px;padding:12px 16px;flex:1}
    @media(min-width:481px){body{background:linear-gradient(180deg,#f1f5f9,transparent 220px)}.app{margin:24px auto;border:1px solid var(--line);border-radius:24px;overflow:hidden}.fab{right:24px;left:auto}}
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <div class="topbar">
        <div class="icon" aria-label="menu">‚ò∞</div>
        <div class="logo"><div class="mark">üçï</div><div>Pizzaria Minutu‚Äôs</div></div>
        <button class="icon" id="modeBtn">‚óê</button>
      </div>
      <div class="address"><span>üìç</span><input id="addr" placeholder="Informar endere√ßo de entrega" /><button id="addrGps" class="pill">Usar GPS</button></div>
    </header>
    <nav class="tabs" id="tabs"></nav>
    <div class="search"><input id="q" type="search" placeholder="Buscar itens" /></div>
    <main class="list" id="list"></main>
    <div class="fab"><button class="cartBtn" id="openCart" disabled><strong id="cartCount">0</strong> itens ‚Ä¢ <strong id="cartTotal">R$ 0,00</strong><small>ver sacola</small></button></div>
    <section class="sheet" id="sheet" aria-hidden="true">
      <header style="padding:12px 14px;display:flex;align-items:center;gap:10px"><h3>Minha sacola</h3><span class="pill" id="eta">30‚Äì40 min</span></header>
      <div class="body" id="cartLines"></div>
      <div class="footer"><button class="close" id="closeCart">Fechar</button><button class="checkout" id="checkout">Finalizar ‚Ä¢ <span id="payTotal">R$ 0,00</span></button></div>
    </section>
  </div>
  <div class="overlay" id="ovl"></div>
  <section class="modal" id="mdl" aria-hidden="true">
    <header>
      <div style="width:56px;height:56px;border-radius:12px;overflow:hidden;background:var(--card)"><img id="mdlImg" alt=""/></div>
      <div style="flex:1 1 auto">
        <div id="mdlTitle" style="font-weight:800"></div>
        <div id="mdlDesc" style="color:var(--muted);font-size:13px"></div>
      </div>
      <button id="mdlClose" class="icon">‚úï</button>
    </header>
    <div class="mbody" id="mdlBody"></div>
    <div class="mfooter">
      <div id="mdlTotal" style="display:grid;place-items:center;font-weight:800">R$ 0,00</div>
      <button class="cta" id="mdlAdd">+ Adicionar ao carrinho</button>
    </div>
  </section>
  <template id="cardTpl"><article class="card"><div class="thumb"><img alt="item" loading="lazy"/></div><div class="meta"><div class="title"></div><div class="desc"></div><div class="priceRow"><div class="price"></div><button class="add">+ Adicionar</button></div></div></article></template>
<script>
const DATA=[
  {id:"pz1",cat:"Pizza",name:"Margherita",desc:"M√©dia | mussarela, tomate, manjeric√£o",price:34.9,img:svg('üçÖ','#ffe4d6'),opts:pizzaOpts()},
  {id:"pz2",cat:"Pizza",name:"Pepperoni",desc:"M√©dia | pepperoni, queijo",price:39.9,img:svg('üßÄ','#fff3c4'),opts:pizzaOpts()},
  {id:"pz3",cat:"Pizza",name:"Frango Supreme",desc:"M√©dia | frango, cebola, milho",price:42.5,img:svg('üåΩ','#fde68a'),opts:pizzaOpts()},
  {id:"sl1",cat:"Salada",name:"Cesar",desc:"Frango, alface, parmes√£o",price:27.0,img:svg('ü•ó','#dcfce7'),opts:null},
  {id:"sd1",cat:"Sobremesa",name:"Brownie",desc:"Chocolate meio amargo",price:16.5,img:svg('üç´','#ede9fe'),opts:null},
  {id:"sd2",cat:"Acompanhamentos",name:"Batata r√∫stica",desc:"P√°prica e ervas",price:18.9,img:svg('ü•î','#fef9c3'),opts:null},
  {id:"bk1",cat:"Bebidas",name:"Refrigerante",desc:"Lata 350ml",price:7.9,img:svg('ü•§','#cffafe'),opts:null}
];
const CATS=[{name:'Pizza',icon:'üçï'},{name:'Salada',icon:'ü•ó'},{name:'Sobremesa',icon:'üç∞'},{name:'Acompanhamentos',icon:'üçü'},{name:'Bebidas',icon:'ü•§'}];
function svg(emoji,bg){return `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><rect width='100%' height='100%' rx='24' fill='${bg}'/><text x='50%' y='52%' text-anchor='middle' font-family='system-ui' font-size='20'>${emoji}</text></svg>`)}`}
function pizzaOpts(){
  return {
    groups:[
      {key:'size',title:'Escolher tamanho',required:true,type:'radio',options:[
        {k:'S',label:'Pequena - 6\"',delta: -6},
        {k:'M',label:'M√©dia - 10\"',delta: 0, default:true},
        {k:'L',label:'Grande - 14\"',delta: 6}
      ]},
      {key:'crust',title:'Escolher borda',required:true,type:'radio',options:[
        {k:'classic',label:'Cl√°ssica',delta:0,default:true},
        {k:'thin',label:'Massa fina',delta:0},
        {k:'cheese',label:'Borda recheada',delta:1.5}
      ]},
      {key:'addons',title:'Adicionais',required:false,type:'check',options:[
        {k:'extra_cheese',label:'Extra queijo',delta:2.5},
        {k:'mushroom',label:'Cogumelos',delta:2.5}
      ]}
    ]
  }
}
const $=s=>document.querySelector(s);const fmt=v=>v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
const cart=JSON.parse(localStorage.getItem('cart@minutus')||'{}');let activeCat='Pizza';
const tabsEl=$('#tabs');
function renderTabs(){tabsEl.innerHTML='';CATS.forEach(c=>{const el=document.createElement('button');el.className='tab'+(c.name===activeCat?' active':'');el.innerHTML=`<img alt="${c.name}" src="${svg(c.icon,'#ffffff')}"/><span>${c.name}</span>`;el.onclick=()=>{activeCat=c.name;renderTabs();renderList()};tabsEl.appendChild(el)})}
const listEl=$('#list');
function renderList(){const q=$('#q').value.trim().toLowerCase();const items=DATA.filter(i=>i.cat===activeCat && (!q || i.name.toLowerCase().includes(q)||i.desc.toLowerCase().includes(q)));listEl.innerHTML='';const tpl=$('#cardTpl').content;items.forEach(it=>{const node=tpl.cloneNode(true);const img=node.querySelector('img');img.src=it.img;img.alt=it.name;node.querySelector('.title').textContent=it.name;node.querySelector('.desc').textContent=it.desc;node.querySelector('.price').textContent=fmt(it.price);node.querySelector('.add').onclick=()=>openModal(it);node.querySelector('.thumb').onclick=()=>openModal(it);listEl.appendChild(node)})}
function addToCartKey(id,sel){return id+'::'+btoa(JSON.stringify(sel||{}))}
function addToCart(id,qty=1,sel={}){const key=addToCartKey(id,sel);cart[key]=(cart[key]||0)+qty;persist();notify()}
function subFromCartKey(key){if(!cart[key]) return;cart[key]-=1;if(cart[key]<=0) delete cart[key];persist();renderCart();notify()}
function persist(){localStorage.setItem('cart@minutus',JSON.stringify(cart));renderBadge()}
function lines(){return Object.entries(cart).map(([key,qty])=>{const [id,b64]=key.split('::');const item=DATA.find(d=>d.id===id);const sel=b64?JSON.parse(atob(b64)):{};return {key,item,qty,sel}})}
function linePrice(item,sel){let base=item.price;const o=item.opts; if(o){o.groups.forEach(g=>{const pick = g.type==='radio' ? sel[g.key] : (sel[g.key]||[]);if(g.type==='radio' && pick){const opt=g.options.find(x=>x.k===pick);if(opt) base+=opt.delta}else if(g.type==='check'){pick.forEach(pk=>{const opt=g.options.find(x=>x.k===pk);if(opt) base+=opt.delta})}})}return base}
function totals(){const t=lines().reduce((a,{item,qty,sel})=>a+linePrice(item,sel)*qty,0);return {t,count:Object.values(cart).reduce((a,b)=>a+b,0)} }
function renderBadge(){const {t,count}=totals();$('#cartCount').textContent=count;$('#cartTotal').textContent=fmt(t);$('#openCart').disabled=count===0;$('#payTotal').textContent=fmt(t)}
const sheet=$('#sheet');$('#openCart').onclick=()=>{renderCart();sheet.classList.add('show');sheet.setAttribute('aria-hidden','false')};$('#closeCart').onclick=()=>{sheet.classList.remove('show');sheet.setAttribute('aria-hidden','true')}
function renderCart(){const wrap=$('#cartLines');wrap.innerHTML='';lines().forEach(({key,item,qty,sel})=>{const row=document.createElement('div');row.className='line';const selTxt=Object.entries(sel).map(([k,v])=>Array.isArray(v)?v.join(', '):v).join(' ‚Ä¢ ');row.innerHTML=`<div style="width:56px;height:56px;border-radius:12px;overflow:hidden;background:var(--card)"><img src="${item.img}" alt="${item.name}"/></div><div style="flex:1 1 auto"><div style="font-weight:700">${item.name}</div><div style="color:var(--muted);font-size:12px">${selTxt||item.desc}</div></div><div class="qty"><button aria-label="menos">‚Äì</button><strong>${qty}</strong><button aria-label="mais">+</button></div><div style="margin-left:auto;font-weight:700">${fmt(linePrice(item,sel)*qty)}</div>`;const [minus,plus]=row.querySelectorAll('button');minus.onclick=()=>subFromCartKey(key);plus.onclick=()=>{cart[key]+=1;persist();renderCart()};wrap.appendChild(row)})}
const ovl=$('#ovl'), mdl=$('#mdl'), mdlBody=$('#mdlBody');let currentItem=null, currentSel={};
function openModal(item){currentItem=item;currentSel=defaultSel(item);$('#mdlImg').src=item.img;$('#mdlTitle').textContent=item.name;$('#mdlDesc').textContent=item.desc;renderOptions(item);updateMdlTotal();ovl.classList.add('show');mdl.classList.add('show');mdl.setAttribute('aria-hidden','false')}
function closeModal(){ovl.classList.remove('show');mdl.classList.remove('show');mdl.setAttribute('aria-hidden','true')}
$('#mdlClose').onclick=closeModal;ovl.onclick=closeModal;
function defaultSel(item){const sel={};if(item.opts) item.opts.groups.forEach(g=>{if(g.type==='radio'){const def=(g.options.find(o=>o.default)||g.options[0]).k;sel[g.key]=def}else sel[g.key]=[]});return sel}
function renderOptions(item){mdlBody.innerHTML='';if(!item.opts) return;item.opts.groups.forEach(g=>{const grp=document.createElement('div');grp.className='optgrp';grp.innerHTML=`<h4>${g.title} ${g.required?'<span class="pill">obrigat√≥rio</span>':'<span style="color:var(--muted);font-size:11px">opcional</span>'}</h4>`;g.options.forEach(op=>{const id=`${item.id}-${g.key}-${op.k}`;const line=document.createElement('div');line.className='opt';const priceLabel=op.delta?`+ ${fmt(op.delta)}`:'';if(g.type==='radio'){line.innerHTML=`<input type="radio" name="${item.id}-${g.key}" id="${id}" ${currentSel[g.key]===op.k?'checked':''}/><label for="${id}">${op.label}</label><small>${priceLabel}</small>`;line.querySelector('input').onchange=()=>{currentSel[g.key]=op.k;updateMdlTotal()}}else{const checked=(currentSel[g.key]||[]).includes(op.k);line.innerHTML=`<input type="checkbox" id="${id}" ${checked?'checked':''}/><label for="${id}">${op.label}</label><small>${priceLabel}</small>`;line.querySelector('input').onchange=(e)=>{const list=new Set(currentSel[g.key]||[]);e.target.checked?list.add(op.k):list.delete(op.k);currentSel[g.key]=[...list];updateMdlTotal()}}grp.appendChild(line)});mdlBody.appendChild(grp)})}
function calcItemTotal(item,sel){return linePrice(item,sel)}
function updateMdlTotal(){$('#mdlTotal').textContent=fmt(calcItemTotal(currentItem,currentSel))}
$('#mdlAdd').onclick=()=>{addToCart(currentItem.id,1,currentSel);closeModal()}
const WAPP_NUMBER='5561985007483';
$('#checkout').onclick=()=>{const {t,count}=totals();if(count===0) return;const addr=$('#addr').value||'endere√ßo pendente';const linesTxt=lines().map(({item,qty,sel})=>{const selTxt=Object.entries(sel||{}).map(([k,v])=>Array.isArray(v)?v.join(','):v).join(' | ');return `‚Ä¢ ${item.name} x${qty} ${selTxt?`(${selTxt})`:''} ‚Äî ${fmt(linePrice(item,sel)*qty)}`}).join('\\n');const msg=`Pizzaria Minutu's - novo pedido%0A%0A${linesTxt}%0A%0aTotal: ${fmt(t)}%0AEntrega: ${encodeURIComponent(addr)}%0A`;const url=`https://wa.me/${WAPP_NUMBER}?text=${msg}`;window.open(url,'_blank');Object.keys(cart).forEach(k=>delete cart[k]);persist();renderCart();renderList();sheet.classList.remove('show')}
$('#q').addEventListener('input',renderList);
$('#addrGps').onclick=()=>{if(!('geolocation' in navigator)){alert('Geolocaliza√ß√£o indispon√≠vel');return}navigator.geolocation.getCurrentPosition(pos=>{const {latitude,longitude}=pos.coords;$('#addr').value=`Coordenadas: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}`},()=>alert('Falha ao obter localiza√ß√£o'))}
function notify(){const btn=$('#openCart');btn.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:260})}
renderTabs();renderList();(function init(){const saved=localStorage.getItem('cart@minutus');if(saved) renderBadge()})();
</script>
</body>
</html>
